generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "debian-openssl-1.1.x", "debian-openssl-3.0.x", "rhel-openssl-1.0.x", "rhel-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model about_content {
  id            Int     @id @default(autoincrement())
  section_key   String  @unique(map: "section_key") @db.VarChar(255)
  section_value String? @db.Text
}

model about_section {
  id          Int       @id @default(autoincrement())
  title_fr    String    @db.VarChar(255)
  title_en    String?   @db.VarChar(255)
  content_fr  String    @db.Text
  content_en  String?   @db.Text
  image_url   String?   @db.VarChar(500)
  mission_fr  String?   @db.Text
  mission_en  String?   @db.Text
  vision_fr   String?   @db.Text
  vision_en   String?   @db.Text
  values_fr   String?   @db.Text
  values_en   String?   @db.Text
  updated_at  DateTime? @default(now()) @db.Timestamp(0)
}

model hero_slides {
  id              Int       @id @default(autoincrement())
  title_fr        String    @db.VarChar(255)
  title_en        String?   @db.VarChar(255)
  subtitle_fr     String?   @db.Text
  subtitle_en     String?   @db.Text
  description_fr  String?   @db.Text
  description_en  String?   @db.Text
  image_url       String    @db.VarChar(500)
  learn_more_link String?   @db.VarChar(500)
  whatsapp_number String?   @db.VarChar(50)
  cta_text_fr     String?   @default("En savoir plus") @db.VarChar(100)
  cta_text_en     String?   @default("Learn more") @db.VarChar(100)
  order_index     Int       @default(0)
  is_active       Boolean   @default(true)
  created_at      DateTime? @default(now()) @db.Timestamp(0)
  updated_at      DateTime? @db.Timestamp(0)
}

model activity_logs {
  id          Int          @id @default(autoincrement())
  user_id     Int?
  action_type String       @db.VarChar(50)
  details     String?      @db.Text
  ip_address  String?      @db.VarChar(45)
  created_at  DateTime?    @default(now()) @db.Timestamp(0)
  admin_users admin_users? @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: Restrict, map: "activity_logs_ibfk_1")

  @@index([user_id], map: "user_id")
}

model admin_users {
  id                       Int                        @id @default(autoincrement())
  username                 String                     @unique(map: "username") @db.VarChar(50)
  password_hash            String                     @db.VarChar(255)
  full_name                String?                    @db.VarChar(100)
  email                    String?                    @db.VarChar(100)
  role                     admin_users_role           @default(admin)
  is_active                Boolean?                   @default(true)
  last_login               DateTime?                  @db.Timestamp(0)
  created_at               DateTime?                  @default(now()) @db.Timestamp(0)
  is_blocked               Boolean                    @default(false)
  permissions              String?                    @db.Text
  activity_logs            activity_logs[]
  payment_requests         payment_requests[]
  visa_assistance_logs     visa_assistance_logs[]
  visa_assistance_requests visa_assistance_requests[]
}

model contact_submissions {
  id           Int                         @id @default(autoincrement())
  name         String                      @db.VarChar(255)
  email        String                      @db.VarChar(255)
  phone        String                      @db.VarChar(50)
  service_type String?                     @db.VarChar(100)
  message      String                      @db.Text
  status       contact_submissions_status? @default(new)
  created_at   DateTime?                   @default(now()) @db.Timestamp(0)
}

model import_requests {
  id                  Int                             @id @default(autoincrement())
  import_service_id   Int?
  client_name         String                          @db.VarChar(100)
  client_email        String?                         @db.VarChar(100)
  client_phone        String                          @db.VarChar(50)
  client_whatsapp     String?                         @db.VarChar(50)
  origin_country      String?                         @db.VarChar(100)
  destination_country String?                         @db.VarChar(100)
  transit_port        import_requests_transit_port?
  cargo_type          String?                         @db.VarChar(100)
  container_size      import_requests_container_size?
  incoterm            import_requests_incoterm?
  cargo_description   String?                         @db.Text
  commodity_type      String?                         @db.Text
  estimated_weight    Decimal?                        @db.Decimal(10, 2)
  status              import_requests_status?         @default(new)
  admin_notes         String?                         @db.Text
  created_at          DateTime?                       @default(now()) @db.Timestamp(0)
  updated_at          DateTime?                       @db.Timestamp(0)
  import_services     import_services?                @relation(fields: [import_service_id], references: [id], onUpdate: Restrict, map: "import_requests_ibfk_1")

  @@index([import_service_id], map: "import_service_id")
}

model import_services {
  id               Int               @id @default(autoincrement())
  service_name_fr  String            @db.VarChar(200)
  service_name_en  String?           @db.VarChar(200)
  slug             String?           @unique @db.VarChar(255)
  description_fr   String?           @db.Text
  description_en   String?           @db.Text
  steps_fr         String?           @db.Text
  steps_en         String?           @db.Text
  countries_served String?           @db.Text
  base_price       Decimal?          @db.Decimal(10, 2)
  currency         String?           @default("USD") @db.VarChar(10)
  icon             String?           @default("fas fa-ship") @db.VarChar(50)
  is_active        Boolean?          @default(true)
  order_index      Int?              @default(0)
  created_at       DateTime?         @default(now()) @db.Timestamp(0)
  import_requests  import_requests[]
}

model pages {
  id                  Int       @id @default(autoincrement())
  slug                String    @unique @db.VarChar(100)
  title_fr            String    @db.VarChar(255)
  title_en            String?   @db.VarChar(255)
  content_fr          String?   @db.Text
  content_en          String?   @db.Text
  meta_description_fr String?   @db.VarChar(500)
  meta_description_en String?   @db.VarChar(500)
  featured_image      String?   @db.VarChar(500)
  is_active           Boolean?  @default(true)
  created_at          DateTime? @default(now()) @db.Timestamp(0)
  updated_at          DateTime? @db.Timestamp(0)
}

model payment_requests {
  id                          Int                                           @id @default(autoincrement())
  payment_service_id          Int?
  client_name                 String                                        @db.VarChar(100)
  client_phone                String                                        @db.VarChar(50)
  client_whatsapp             String?                                       @db.VarChar(50)
  sender_name                 String?                                       @db.VarChar(255)
  sender_address              String?                                       @db.Text
  receiver_name               String?                                       @db.VarChar(255)
  receiver_id_number          String?                                       @db.VarChar(100)
  receiver_phone              String?                                       @db.VarChar(50)
  receiver_address            String?                                       @db.Text
  receiver_photo              String?                                       @db.VarChar(500)
  payment_method              payment_requests_payment_method?              @default(cash)
  bank_slip_proof             String?                                       @db.VarChar(500)
  transfer_fee_percentage     Decimal?                                      @db.Decimal(5, 2)
  transfer_fee_amount         Decimal?                                      @db.Decimal(15, 2)
  total_to_pay                Decimal?                                      @db.Decimal(15, 2)
  amount_to_receive           Decimal?                                      @db.Decimal(15, 2)
  operator                    String?                                       @db.VarChar(100)
  amount                      Decimal?                                      @db.Decimal(15, 2)
  currency                    String?                                       @db.VarChar(10)
  verification_code           String?                                       @unique(map: "verification_code") @db.VarChar(12)
  transaction_type            payment_requests_transaction_type?            @default(send)
  status                      payment_requests_status?                      @default(new)
  payment_verification_status payment_requests_payment_verification_status? @default(verified)
  payout_status               payment_requests_payout_status?               @default(Pending)
  code_verified_at            DateTime?                                     @db.Timestamp(0)
  verified_by_admin           Int?
  admin_notes                 String?                                       @db.Text
  created_at                  DateTime?                                     @default(now()) @db.Timestamp(0)
  updated_at                  DateTime?                                     @db.Timestamp(0)
  admin_users                 admin_users?                                  @relation(fields: [verified_by_admin], references: [id], onUpdate: Restrict, map: "fk_rel_verified_by_admin")
  payment_services            payment_services?                             @relation(fields: [payment_service_id], references: [id], onUpdate: Restrict, map: "payment_requests_ibfk_1")

  @@index([verified_by_admin], map: "fk_verified_by_admin")
  @@index([receiver_id_number], map: "idx_receiver_id")
  @@index([receiver_name], map: "idx_receiver_name")
  @@index([receiver_phone], map: "idx_receiver_phone")
  @@index([sender_name], map: "idx_sender_name")
  @@index([payment_service_id], map: "payment_service_id")
  @@index([verification_code], map: "verification_code_2")
}

model payment_services {
  id               Int                @id @default(autoincrement())
  operator_name    String             @db.VarChar(100)
  operator_logo    String?            @db.VarChar(500)
  description_fr   String?            @db.Text
  description_en   String?            @db.Text
  limits_info_fr   String?            @db.Text
  limits_info_en   String?            @db.Text
  guide_content_fr String?            @db.Text
  guide_content_en String?            @db.Text
  daily_limit      Decimal?           @db.Decimal(15, 2)
  monthly_limit    Decimal?           @db.Decimal(15, 2)
  exchange_rate    Decimal?           @db.Decimal(10, 4)
  currency_pair    String?            @db.VarChar(20)
  is_active        Boolean?           @default(true)
  order_index      Int?               @default(0)
  created_at       DateTime?          @default(now()) @db.Timestamp(0)
  payment_requests payment_requests[]
}

model site_content {
  id            Int       @id @default(autoincrement())
  content_key   String    @unique(map: "content_key") @db.VarChar(255)
  content_value String?   @db.Text
  created_at    DateTime? @default(now()) @db.Timestamp(0)
  updated_at    DateTime? @default(now()) @db.Timestamp(0)
}

model site_settings {
  id            Int                         @id @default(autoincrement())
  setting_key   String                      @unique(map: "setting_key") @db.VarChar(100)
  setting_value String?                     @db.Text
  setting_group String?                     @default("general") @db.VarChar(50)
  setting_type  site_settings_setting_type? @default(text)
  created_at    DateTime?                   @default(now()) @db.Timestamp(0)
  updated_at    DateTime?                   @db.Timestamp(0)
}

model system_status {
  id               Int       @id @default(1)
  maintenance_mode Boolean?  @default(false)
  frozen_modules   String?   @db.Text
  updated_at       DateTime? @default(now()) @db.Timestamp(0)
}

model vehicle_images {
  id          Int      @id @default(autoincrement())
  vehicle_id  Int
  image_url   String   @db.VarChar(500)
  alt_text    String?  @db.VarChar(255)
  order_index Int?     @default(0)
  vehicles    vehicles @relation(fields: [vehicle_id], references: [id], onDelete: Cascade, onUpdate: Restrict, map: "vehicle_images_ibfk_1")

  @@index([vehicle_id], map: "vehicle_images_vehicle_id_idx")
}

model vehicle_requests {
  id              Int                      @id @default(autoincrement())
  vehicle_id      Int?
  client_name     String                   @db.VarChar(100)
  client_email    String?                  @db.VarChar(100)
  client_phone    String                   @db.VarChar(50)
  client_whatsapp String?                  @db.VarChar(50)
  message         String?                  @db.Text
  status          vehicle_requests_status? @default(new)
  admin_notes     String?                  @db.Text
  created_at      DateTime?                @default(now()) @db.Timestamp(0)
  updated_at      DateTime?                @db.Timestamp(0)
  vehicles        vehicles?                @relation(fields: [vehicle_id], references: [id], onUpdate: Restrict, map: "vehicle_requests_ibfk_1")

  @@index([vehicle_id], map: "vehicle_requests_vehicle_id_idx")
}

model vehicles {
  id                Int                         @id @default(autoincrement())
  slug              String                      @unique @db.VarChar(255)
  brand             String                      @db.VarChar(100)
  model             String                      @db.VarChar(100)
  year              Int?
  transmission      vehicles_transmission?      @default(automatic)
  fuel_type         vehicles_fuel_type?         @default(petrol)
  price             Decimal?                    @db.Decimal(15, 2)
  status            vehicles_status             @default(available)
  currency          String?                     @default("USD") @db.VarChar(10)
  vehicle_condition vehicles_vehicle_condition? @default(used)
  description_fr   String?                     @db.Text
  description_en   String?                     @db.Text
  main_image        String?                     @db.VarChar(500)
  mileage           Int?
  color             String?                     @db.VarChar(50)
  engine_size       String?                     @db.VarChar(20)
  doors             Int?                        @default(4)
  seats             Int?                        @default(5)
  is_featured       Boolean?                    @default(false)
  is_active         Boolean?                    @default(true)
  order_index       Int?                        @default(0)
  created_at        DateTime?                   @default(now()) @db.Timestamp(0)
  updated_at        DateTime?                   @db.Timestamp(0)
  vehicle_images    vehicle_images[]
  vehicle_requests  vehicle_requests[]

  @@index([price], map: "idx_price")
  @@index([status], map: "idx_status")
  @@index([year], map: "idx_year")
}

model visa_assistance_docs {
  id                       Int                      @id @default(autoincrement())
  request_id               Int
  file_name                String                   @db.VarChar(255)
  file_path                String                   @db.VarChar(500)
  file_type                String?                  @db.VarChar(50)
  file_size                Int?
  uploaded_at              DateTime?                @default(now()) @db.Timestamp(0)
  visa_assistance_requests visa_assistance_requests @relation(fields: [request_id], references: [id], onDelete: Cascade, onUpdate: Restrict, map: "visa_assistance_docs_ibfk_1")

  @@index([request_id], map: "visa_assistance_docs_request_id_idx")
}

model visa_assistance_logs {
  id                       Int                      @id @default(autoincrement())
  request_id               Int
  admin_id                 Int?
  action_type              String                   @db.VarChar(50)
  action_description       String?                  @db.Text
  created_at               DateTime?                @default(now()) @db.Timestamp(0)
  visa_assistance_requests visa_assistance_requests @relation(fields: [request_id], references: [id], onDelete: Cascade, onUpdate: Restrict, map: "visa_assistance_logs_ibfk_1")
  admin_users              admin_users?             @relation(fields: [admin_id], references: [id], onUpdate: Restrict, map: "visa_assistance_logs_ibfk_2")

  @@index([admin_id], map: "admin_id")
  @@index([request_id], map: "visa_assistance_logs_request_id_idx")
}

model visa_assistance_requests {
  id                   Int                                @id @default(autoincrement())
  full_name            String                             @db.VarChar(100)
  email                String                             @db.VarChar(100)
  phone                String                             @db.VarChar(50)
  whatsapp             String?                            @db.VarChar(50)
  origin_country       String                             @db.VarChar(100)
  destination_country  String                             @db.VarChar(100)
  visa_type            visa_assistance_requests_visa_type
  travel_purpose       String?                            @db.Text
  departure_date       DateTime?                          @db.Date
  duration_stay        String?                            @db.VarChar(50)
  status               visa_assistance_requests_status?   @default(received)
  assigned_agent_id    Int?
  admin_notes          String?                            @db.Text
  checklist_status     String?                            @db.Text
  created_at           DateTime?                          @default(now()) @db.Timestamp(0)
  updated_at           DateTime?                          @db.Timestamp(0)
  visa_assistance_docs visa_assistance_docs[]
  visa_assistance_logs visa_assistance_logs[]
  admin_users          admin_users?                       @relation(fields: [assigned_agent_id], references: [id], onUpdate: Restrict, map: "visa_assistance_requests_ibfk_1")

  @@index([assigned_agent_id], map: "assigned_agent_id")
}

model visa_assistance_settings {
  id            Int       @id @default(autoincrement())
  setting_key   String    @unique(map: "visa_assistance_settings_key_idx") @db.VarChar(100)
  setting_value String?   @db.Text
  description   String?   @db.VarChar(255)
  updated_at    DateTime? @db.Timestamp(0)
}

model visa_requests {
  id                  Int                   @id @default(autoincrement())
  visa_service_id     Int?
  client_name         String                @db.VarChar(100)
  client_email        String?               @db.VarChar(100)
  client_phone        String                @db.VarChar(50)
  client_whatsapp     String?               @db.VarChar(50)
  destination_country String?               @db.VarChar(100)
  visa_type           String?               @db.VarChar(100)
  travel_date         DateTime?             @db.Date
  additional_info     String?               @db.Text
  status              visa_requests_status? @default(new)
  admin_notes         String?               @db.Text
  created_at          DateTime?             @default(now()) @db.Timestamp(0)
  updated_at          DateTime?             @db.Timestamp(0)
  visa_services       visa_services?        @relation(fields: [visa_service_id], references: [id], onUpdate: Restrict, map: "visa_requests_ibfk_1")

  @@index([visa_service_id], map: "visa_requests_visa_service_id_idx")
}

model visa_services {
  id                  Int             @id @default(autoincrement())
  country_code        String          @db.VarChar(3)
  country_name_fr     String          @db.VarChar(100)
  country_name_en     String?         @db.VarChar(100)
  flag_icon           String?         @db.VarChar(100)
  requirements_fr     String?         @db.Text
  requirements_en     String?         @db.Text
  documents_needed_fr String?         @db.Text
  documents_needed_en String?         @db.Text
  processing_time     String?         @db.VarChar(50)
  service_fee         Decimal?        @db.Decimal(10, 2)
  currency            String?         @default("USD") @db.VarChar(10)
  is_active           Boolean?        @default(true)
  order_index         Int?            @default(0)
  created_at          DateTime?       @default(now()) @db.Timestamp(0)
  visa_requests       visa_requests[]
}

enum site_settings_setting_type {
  text
  textarea
  image
  boolean
  json
}

enum vehicles_transmission {
  automatic
  manual
}

enum admin_users_role {
  creator
  super_admin
  admin
}

enum vehicles_fuel_type {
  petrol
  diesel
  hybrid
  electric
}

enum contact_submissions_status {
  new
  read
  replied
}

enum vehicle_requests_status {
  new
  in_progress
  completed
  cancelled
}

enum visa_assistance_requests_visa_type {
  tourist
  business
  student
  work
  medical
  transit
}

enum vehicles_status {
  available
  negotiating
  sold
}

enum import_requests_transit_port {
  Mombasa
  Dar_es_Salaam @map("Dar es Salaam")
  Other
}

enum vehicles_vehicle_condition {
  new
  used
  certified
}

enum import_requests_container_size {
  ft_20        @map("20ft")
  ft_40        @map("40ft")
  LCL_Groupage @map("LCL/Groupage")
}

enum visa_requests_status {
  new
  in_progress
  completed
  cancelled
}

enum import_requests_incoterm {
  EXW
  FOB
  CIF
  DAP
}

enum visa_assistance_requests_status {
  received
  analyzing
  docs_incomplete
  docs_complete
  submitted
  pending_response
  accepted
  rejected
  closed
}

enum payment_requests_payment_method {
  cash
  bank
}

enum import_requests_status {
  new
  quote_sent
  docs_pending
  in_transit
  completed
  cancelled
}

enum payment_requests_transaction_type {
  send
  receive
  exchange
}

enum payment_requests_status {
  new
  in_progress
  completed
  cancelled
}

enum payment_requests_payment_verification_status {
  pending
  verified
}

enum payment_requests_payout_status {
  Pending
  Ready
  Paid
  Cancelled
}
